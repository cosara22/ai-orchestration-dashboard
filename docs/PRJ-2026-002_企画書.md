# 企画書：AI Orchestration Dashboard

**文書番号**: PRJ-2026-002
**作成日**: 2026年1月18日
**作成者**: Cosara + Claude Code
**ステータス**: Draft

---

## 1. エグゼクティブサマリー

### 1.1 プロジェクト概要

本プロジェクトは、複数のClaude Codeインスタンスを用いた並列AI開発を統合管理するダッシュボードシステムを構築する。既存のMCPオーケストレーションサーバー（制御プレーン）とHooksベースの監視システム（観測プレーン）を統合し、**制御と可視化を両立**した開発基盤を実現する。

### 1.2 プロジェクト名

**AI Orchestration Dashboard** (コードネーム: AOD)

### 1.3 目標

| 目標 | 説明 |
|------|------|
| 並列開発の可視化 | 複数プロジェクト・複数エージェントの状態をリアルタイムで把握 |
| タスク制御の維持 | 既存MCPオーケストレーションによる役割分担・タスク管理を継続 |
| 人間との協働強化 | ダッシュボードを通じた介入・調整を可能に |
| コスト最適化 | Claude Code（定額）を活用、API課金なし |

---

## 2. 背景と課題

### 2.1 現状の課題

| 課題 | 詳細 | 影響度 |
|------|------|--------|
| 可視化の欠如 | 既存MCPオーケストレーションにダッシュボードがない | 高 |
| 状態把握の困難 | 複数Cursorウィンドウを目視で監視 | 高 |
| 人間介入の遅延 | 問題発生時の検知・対応が遅い | 中 |
| プロジェクト横断管理 | 複数プロジェクトの進捗を統合的に把握できない | 中 |

### 2.2 既存資産

| 資産 | 状態 | 活用方針 |
|------|------|----------|
| mcp-orchestration-server | 開発済み | 制御プレーンとして統合 |
| 開発環境 (WSL2/Docker) | 構築済み | 基盤として活用 |
| テンプレートライブラリ (36個) | 構築済み | フロントエンド/バックエンドに活用 |

---

## 3. 提案ソリューション

### 3.1 アーキテクチャ概要

```
┌─────────────────────────────────────────────────────────────────┐
│                    AI Orchestration Dashboard                    │
│                      (Next.js + Tailwind)                        │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐            │
│  │ Project View │ │ Agent View   │ │ Task View    │            │
│  │ プロジェクト │ │ エージェント │ │ タスク状態   │            │
│  └──────────────┘ └──────────────┘ └──────────────┘            │
└─────────────────────────────────────────────────────────────────┘
         ↑ WebSocket                      ↑ REST API
┌─────────────────────────────────────────────────────────────────┐
│                    Unified API Gateway                           │
│                      (FastAPI / Bun)                             │
│  ┌──────────────────┐  ┌──────────────────┐                     │
│  │ Event Collector  │  │ Redis Adapter    │                     │
│  │ (Hooks受信)      │  │ (MCP状態取得)    │                     │
│  └──────────────────┘  └──────────────────┘                     │
└─────────────────────────────────────────────────────────────────┘
         ↑ HTTP POST (Hooks)              ↑ Redis Protocol
┌─────────────────────────────────────────────────────────────────┐
│              既存 MCP Orchestration Server                       │
│                      (Redis Backend)                             │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐   │
│  │create_task │ │poll_tasks  │ │submit_result│ │shared_state│   │
│  └────────────┘ └────────────┘ └────────────┘ └────────────┘   │
└─────────────────────────────────────────────────────────────────┘
         ↑ MCP Protocol
┌─────────────────────────────────────────────────────────────────┐
│                    Claude Code Agents                            │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│  │Orchestr. │ │Planning  │ │Implement.│ │Testing   │          │
│  │(Cursor紫)│ │(Cursor青)│ │(Cursor緑)│ │(Cursor橙)│          │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘          │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 主要コンポーネント

| コンポーネント | 役割 | 技術スタック |
|----------------|------|--------------|
| Dashboard Frontend | 可視化UI | Next.js, TypeScript, Tailwind, Chart.js |
| Unified API Gateway | 統合API層 | FastAPI or Bun |
| Event Collector | Hooks受信・保存 | SQLite (WAL mode) |
| Redis Adapter | MCP状態取得 | Redis client |
| MCP Server | 既存制御プレーン | Node.js, Redis |

---

## 4. スコープ

### 4.1 Phase 1: MVP (2週間)

| 機能 | 優先度 | 説明 |
|------|--------|------|
| リアルタイムイベント表示 | P0 | Hooks経由のイベントを即時表示 |
| エージェント状態表示 | P0 | Redis からエージェント状態を取得・表示 |
| タスク一覧表示 | P0 | 進行中・完了・失敗タスクの一覧 |
| プロジェクト切替 | P1 | 複数プロジェクトのビュー切替 |

### 4.2 Phase 2: 拡張機能 (1ヶ月)

| 機能 | 優先度 | 説明 |
|------|--------|------|
| タスク作成UI | P1 | ダッシュボードからタスク発行 |
| HITL介入機能 | P1 | 人間からエージェントへの指示送信 |
| メトリクス・分析 | P2 | 実行時間、成功率などの統計 |
| アラート通知 | P2 | エラー・タイムアウト時の通知 |

### 4.3 Phase 3: 高度な機能 (将来)

| 機能 | 説明 |
|------|------|
| GitHub Issues統合 | CCPMとの連携 |
| 自動スケーリング | エージェント数の動的調整 |
| AI分析 | パフォーマンス最適化の提案 |

---

## 5. 成功指標 (KPI)

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| 状態把握時間 | 5秒以内 | ダッシュボード表示までの時間 |
| 問題検知時間 | 30秒以内 | エラー発生から通知までの時間 |
| 並列エージェント数 | 4+ | 同時稼働エージェント数 |
| ダッシュボード応答性 | 100ms以内 | WebSocket遅延 |

---

## 6. リスクと対策

| リスク | 影響度 | 発生可能性 | 対策 |
|--------|--------|------------|------|
| Redis接続障害 | 高 | 低 | ヘルスチェック、自動再接続 |
| WebSocket切断 | 中 | 中 | 自動再接続、オフラインキャッシュ |
| Hooks設定ミス | 中 | 中 | 検証スクリプト、ドキュメント整備 |
| パフォーマンス問題 | 中 | 低 | SQLite WALモード、インデックス最適化 |

---

## 7. スケジュール

```
Week 1-2: Phase 1 MVP
├── Day 1-2: プロジェクト基盤構築
├── Day 3-5: Event Collector実装
├── Day 6-8: Redis Adapter実装
├── Day 9-11: Dashboard Frontend実装
└── Day 12-14: 統合テスト・調整

Week 3-4: Phase 2 拡張
├── タスク作成UI
├── HITL介入機能
└── メトリクス表示
```

---

## 8. 予算・リソース

| 項目 | コスト | 備考 |
|------|--------|------|
| Claude Code Max | $100/月 | 既存契約内 |
| インフラ | $0 | ローカル開発環境 |
| 外部API | $0 | 使用しない |
| **合計** | **$0追加** | 既存リソース内で実現 |

---

## 9. 承認

| 役割 | 名前 | 承認日 |
|------|------|--------|
| プロジェクトオーナー | Cosara | - |
| 技術リード | Claude Code | - |

---

## 変更履歴

| バージョン | 日付 | 変更者 | 変更内容 |
|-----------|------|--------|----------|
| 1.0 | 2026/01/18 | Cosara + Claude | 初版作成 |
